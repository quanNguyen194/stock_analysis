{"remainingRequest":"/home/quan/Documents/Projects/stock_analysis/node_modules/babel-loader/lib/index.js!/home/quan/Documents/Projects/stock_analysis/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/quan/Documents/Projects/stock_analysis/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quan/Documents/Projects/stock_analysis/src/views/user/setting/tabs/setting-employee.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quan/Documents/Projects/stock_analysis/src/views/user/setting/tabs/setting-employee.vue","mtime":1615822194522},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/quan/Documents/Projects/stock_analysis/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/quan/Documents/Projects/stock_analysis/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Button from '@/components/partials/button';\nimport Modal from '@/components/partials/modal';\nimport SettingApi from '@/services/setting';\nimport { mapActions, mapGetters } from 'vuex';\nimport { SET_LOADING } from '@/store/types';\nexport default {\n  name: 'setting-employee',\n  components: {\n    Button: Button,\n    Modal: Modal\n  },\n  computed: _objectSpread({}, mapGetters({\n    profile: 'user',\n    store: 'store',\n    isLoading: 'isLoading'\n  })),\n  data: function data() {\n    return {\n      users: [],\n      modal_visible: false,\n      validRole: false,\n      deleteId: '',\n      deleteIndex: '',\n      isShowDelete: true,\n      dataStore: null\n    };\n  },\n  created: function () {\n    var _created = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var list;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return SettingApi.listUsers();\n\n            case 2:\n              list = _context.sent;\n              this.users = list.data.users;\n              this.setLoading(false);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  mounted: function mounted() {\n    this.dataStore = this.store;\n    this.setLoading(true);\n\n    if (this.profile.role === 'admin') {\n      this.isShowDelete = false;\n    }\n\n    if (this.profile.role !== 'user') {\n      this.validRole = true;\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    setLoading: SET_LOADING\n  })), {}, {\n    deleteUser: function () {\n      var _deleteUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return SettingApi.deleteUser(this.deleteId);\n\n              case 2:\n                this.users.splice(this.deleteIndex, 1);\n                this.modal_visible = false;\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function deleteUser() {\n        return _deleteUser.apply(this, arguments);\n      }\n\n      return deleteUser;\n    }(),\n    toggleVisible: function toggleVisible(id, index) {\n      this.modal_visible = !this.modal_visible;\n      this.deleteId = id;\n      this.deleteIndex = index;\n    }\n  })\n};",{"version":3,"sources":["setting-employee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,OAAA,MAAA,MAAA,8BAAA;AACA,OAAA,KAAA,MAAA,6BAAA;AACA,OAAA,UAAA,MAAA,oBAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,SAAA,WAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,kBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,KAAA,EAAA;AAFA,GAFA;AAMA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,OAAA,EAAA,MADA;AAEA,IAAA,KAAA,EAAA,OAFA;AAGA,IAAA,SAAA,EAAA;AAHA,GAAA,CADA,CANA;AAcA,EAAA,IAdA,kBAcA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,SAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,WAAA,EAAA,EALA;AAMA,MAAA,YAAA,EAAA,IANA;AAOA,MAAA,SAAA,EAAA;AAPA,KAAA;AASA,GAxBA;AAyBA,EAAA,OAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBA0BA,UAAA,CAAA,SAAA,EA1BA;;AAAA;AA0BA,cAAA,IA1BA;AA2BA,mBAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,mBAAA,UAAA,CAAA,KAAA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8BA,EAAA,OA9BA,qBA8BA;AACA,SAAA,SAAA,GAAA,KAAA,KAAA;AACA,SAAA,UAAA,CAAA,IAAA;;AACA,QAAA,KAAA,OAAA,CAAA,IAAA,KAAA,OAAA,EAAA;AACA,WAAA,YAAA,GAAA,KAAA;AACA;;AACA,QAAA,KAAA,OAAA,CAAA,IAAA,KAAA,MAAA,EAAA;AACA,WAAA,SAAA,GAAA,IAAA;AACA;AACA,GAvCA;AAwCA,EAAA,OAAA,kCACA,UAAA,CAAA;AACA,IAAA,UAAA,EAAA;AADA,GAAA,CADA;AAIA,IAAA,UAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKA,UAAA,CAAA,UAAA,CAAA,KAAA,QAAA,CALA;;AAAA;AAMA,qBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,WAAA,EAAA,CAAA;AACA,qBAAA,aAAA,GAAA,KAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AASA,IAAA,aATA,yBASA,EATA,EASA,KATA,EASA;AACA,WAAA,aAAA,GAAA,CAAA,KAAA,aAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACA;AAbA;AAxCA,CAAA","sourcesContent":["<template>\n  <div class=\"setting-employee\" v-if=\"!isLoading\">\n    <div class=\"btn-registration button-edit\">\n      <router-link :to=\"{name: 'user.regist'}\">\n        <Button padding=\"5px 10px\" v-if=\"store.max_users > users.length\">\n          従業員登録\n        </Button>\n      </router-link>\n    </div>\n    <div class=\"fright\">\n      <span>ユーザー数: {{users.length}}/{{store.max_users}}</span>\n    </div>\n    <div class=\"clear\"></div>\n    <div class=\"table-info\">\n      <table>\n        <tr class=\"title\">\n          <th>#</th>\n          <th>氏名</th>\n          <th>電話番号</th>\n          <th>メールアドレス</th>\n          <th>アクション</th>\n        </tr>\n        <tr v-for=\"(user, index) in users\" :key=\"user.email\" style=\"width: 100%\">\n          <td class=\"table__empty\">{{index + 1}}</td>\n          <td class=\"table__name font-weight-bold-mb\">{{ user.name }}</td>\n          <td class=\"table__phone\">{{ user.phone }}</td>\n          <td class=\"table__email\">{{ user.email }}</td>\n          <td class=\"table__btn\">\n            <div v-if=\"user.email!==profile.email && validRole\">\n              <div class=\"action\">\n                <router-link :to=\"'/user/update/'+user._id\">\n                  <Button background-color=\"#151e5d\" width=\"30px\" height=\"30px\">\n                    <div class=\"action-icon\">\n                      <i class=\"fas fa-pen-square\"></i>\n                    </div>\n                  </Button>\n                </router-link>\n              </div>\n\n              <div class=\"action\" v-if=\"user.name !== store.representative_name && user.role !== 'manager' \">\n                <Button backgroundColor=\"#ff0000\" width=\"30px\" height=\"30px\" fontSize=\"22px\" class=\"m-a\"\n                        :click=\"() => toggleVisible(user._id, index)\">\n                  <div class=\"action-icon\">×</div>\n                </Button>\n              </div>\n            </div>\n          </td>\n        </tr>\n      </table>\n    </div>\n    <div class=\"modal-confirm\">\n      <Modal title=\"このユーザーを削除します\" v-if=\"modal_visible\" @updateModalVisible=\"modal_visible = false\" width=\"50%\">\n        <p style=\"font-weight: bold\">\n          削除すると、もとに戻すことはできません。 <br>\n          それでもよろしい場合は削除を選択してください。\n        </p>\n        <template slot=\"footer\">\n          <div @click=\"() => toggleVisible()\" class=\"not_delete\">\n            <Button background-color=\"#fff\" color=\"#24374e\" border-color=\"#24374e\">キャンセル</Button>\n          </div>\n          <div class=\"deleted\">\n            <Button :click=\"() => deleteUser()\" border-color=\"#24374e\">削除</Button>\n          </div>\n        </template>\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Button from '@/components/partials/button'\nimport Modal from '@/components/partials/modal'\nimport SettingApi from '@/services/setting'\nimport { mapActions, mapGetters } from 'vuex'\nimport { SET_LOADING } from '@/store/types'\n\nexport default {\n  name: 'setting-employee',\n  components: {\n    Button,\n    Modal\n  },\n  computed: {\n    ...mapGetters({\n      profile: 'user',\n      store: 'store',\n      isLoading: 'isLoading'\n    })\n  },\n\n  data () {\n    return {\n      users: [],\n      modal_visible: false,\n      validRole: false,\n      deleteId: '',\n      deleteIndex: '',\n      isShowDelete: true,\n      dataStore: null\n    }\n  },\n  async created () {\n    const list = await SettingApi.listUsers()\n    this.users = list.data.users\n    this.setLoading(false)\n  },\n  mounted () {\n    this.dataStore = this.store\n    this.setLoading(true)\n    if (this.profile.role === 'admin') {\n      this.isShowDelete = false\n    }\n    if (this.profile.role !== 'user') {\n      this.validRole = true\n    }\n  },\n  methods: {\n    ...mapActions({\n      setLoading: SET_LOADING\n    }),\n    async deleteUser () {\n      await SettingApi.deleteUser(this.deleteId)\n      this.users.splice(this.deleteIndex, 1)\n      this.modal_visible = false\n    },\n    toggleVisible (id, index) {\n      this.modal_visible = !this.modal_visible\n      this.deleteId = id\n      this.deleteIndex = index\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n  .mt-25 {\n    margin-top: 25px\n  }\n\n  .m-a {\n    margin: auto;\n  }\n\n  .setting-employee {\n    .btn-registration {\n\n      width: 160px;\n      padding: 5px 10px;\n    }\n\n    .table-info {\n      overflow-x: auto;\n      margin-top: 10px;\n\n      table {\n        width: 100%;\n        min-width: 700px;\n        text-align: center;\n        border: none;\n        border-collapse: collapse;\n      }\n\n      th {\n        background-color: #e8e6e6;\n        border: none;\n        border-collapse: collapse;\n        padding: 5px;\n      }\n\n      td {\n        padding: 10px;\n      }\n\n      tr {\n        background-color: #fff;\n        border: none;\n        border-collapse: collapse;\n      }\n    }\n\n    .deleted {\n      width: 35%;\n      margin-left: 15px;\n    }\n\n    .not_delete {\n      width: 35%;\n      margin-right: 15px;\n    }\n\n  }\n\n  .action {\n    display: inline-block;\n    margin: 0 10px;\n    vertical-align: top;\n\n    &-icon {\n      display: block;\n      margin: auto;\n      transform: translate(3%, -10%);\n    }\n  }\n\n  //------------------------------------------------------RESPONSIVE------------------------------------------------------\n\n  @media (max-width: 768px) {\n    .font-weight-bold-mb {\n      font-weight: bold\n    }\n    .setting-employee {\n      padding-bottom: 70px\n    }\n\n    table {\n      min-width: 100% !important;\n\n      .title {\n        display: none;\n      }\n\n      tr {\n        border-bottom: 2px solid #efefef !important;\n      }\n\n      .table__empty {\n        display: none;\n      }\n\n      .table__name {\n        display: block;\n        text-align: left;\n      }\n\n      .table__phone {\n        @extend .table__name\n      }\n\n      .table__email {\n        @extend .table__name\n      }\n\n      .table__btn {\n        .button__container {\n          height: 40px !important;\n          padding: 5px !important;\n        }\n      }\n    }\n    .action-icon {\n      transform: translate(0%, -10%);\n      font-size: 20px !important;\n    }\n  }\n\n  @media (max-width: 539px) {\n    .table__btn {\n      display: block;\n      text-align: left;\n    }\n  }\n</style>\n"],"sourceRoot":"src/views/user/setting/tabs"}]}