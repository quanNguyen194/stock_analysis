{"remainingRequest":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quan/Documents/Projects/django-vue/frontend_test/src/views/change-password.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/src/views/change-password.vue","mtime":1615822194522},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapActions, mapGetters } from 'vuex';\nimport EmptyLayout from \"./layouts/empty-layout\";\nimport TextBox from \"../components/partials/textbox\";\nimport Button from \"../components/partials/button\";\nimport { LOGIN, SET_CURRENT_STORE } from \"../store/types\";\nimport ResetPassApi from \"../services/auth\";\nexport default {\n  name: 'login',\n  components: {\n    EmptyLayout: EmptyLayout,\n    TextBox: TextBox,\n    Button: Button\n  },\n  data: function data() {\n    return {\n      errors: {\n        password: '',\n        confirmPass: '',\n        server: ''\n      },\n      form: {\n        password: '',\n        confirmPass: ''\n      },\n      message: {}\n    };\n  },\n  computed: _objectSpread({}, mapGetters({\n    isAdminPage: 'isAdminPage',\n    isLoading: 'isLoading'\n  })),\n  watch: {\n    form: function form(val) {}\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    login: LOGIN,\n    checkStore: SET_CURRENT_STORE\n  })), {}, {\n    updatePass: function () {\n      var _updatePass = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var canSave, token, password, formData, resetResult;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                canSave = true;\n\n                if (!this.form.password) {\n                  this.errors.password = '*この項目は必須です。';\n                  canSave = false;\n                } else {\n                  this.errors.password = '';\n                }\n\n                if (this.form.password.length < 4) {\n                  this.errors.password = '*パスワードは4文字以上である必要があります !';\n                  canSave = false;\n                } else {\n                  this.errors.password = '';\n                }\n\n                if (this.form.confirmPass !== this.form.password) {\n                  this.errors.confirmPass = '*パスワードが一致しません。再入力してください !';\n                  canSave = false;\n                } else {\n                  this.errors.confirmPass = '';\n                }\n\n                if (!(canSave === true)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                token = this.$route.query.token;\n                password = this.form.password;\n                formData = {\n                  token: token,\n                  password: password\n                };\n                _context.next = 10;\n                return ResetPassApi.resetPass(formData);\n\n              case 10:\n                resetResult = _context.sent;\n\n                if (resetResult && resetResult.error) {\n                  if (resetResult.error === 'invalid_token') {\n                    this.errors.server = 'エラーが発生しました。後でもう一度お試しください。!';\n                    canSave = false;\n                  }\n\n                  if (resetResult.error === 'user_not_found') {\n                    this.errors.server = '入力されたユーザー名が見つかりません。もう一度お試し下さい!';\n                    canSave = false;\n                  }\n\n                  if (resetResult.error === 'token_and_password_required') {\n                    this.errors.server = 'エラーが発生しました。後でもう一度お試しください。!';\n                    canSave = false;\n                  }\n                }\n\n                if (canSave === true) {\n                  this.$router.push('/login');\n                }\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function updatePass() {\n        return _updatePass.apply(this, arguments);\n      }\n\n      return updatePass;\n    }()\n  })\n};",{"version":3,"sources":["change-password.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"html\">\n  <empty-layout>\n    <div v-if=\"!isLoading\" class=\"signInComponent\">\n      <div class=\"signInBox\">\n        <div class=\"page-return\">\n          <router-link :to=\"{name: 'login'}\"><i class=\"fas fa-arrow-left\" style=\"margin-right:8px\"/>ログイン画面へ戻る </router-link>\n        </div>\n        <div class=\"signInTitleBox\">\n          パスワードを変更する\n        </div>\n        <span class=\"error__server\" v-if=\"errors.server.length > 0\">{{ errors.server }}</span>\n        <span class=\"error\" v-if=\"errors.password.length > 0\">{{ errors.password }}</span>\n        <div class=\"signInEmailBox\">\n          <TextBox\n            id=\"old_password\"\n            v-model=\"form.password\"\n            type=\"password\"\n            placeholder=\"新しいパスワード\"\n            pleft=\"14px\"\n            autocomplete=\"off\"\n          />\n        </div>\n        <span class=\"error\" v-if=\"errors.confirmPass.length\">{{ errors.confirmPass }}</span>\n        <div class=\"signInPasswordBox\">\n          <TextBox\n            id=\"new_password\"\n            v-model=\"form.confirmPass\"\n            type=\"password\"\n            placeholder=\"パスワード確認\"\n            pleft=\"14px\"\n            autocomplete=\"off\"\n          />\n        </div>\n        <div class=\"signInButtonBox\">\n          <Button :click=\"updatePass\">\n            <span class=\"signInButtonText\">変更する</span>\n          </Button>\n        </div>\n      </div>\n    </div>\n  </empty-layout>\n</template>\n\n<script lang=\"js\">\n\nimport { mapActions, mapGetters } from 'vuex'\nimport EmptyLayout from './layouts/empty-layout'\nimport TextBox from '../components/partials/textbox'\nimport Button from '../components/partials/button'\nimport { LOGIN, SET_CURRENT_STORE } from '../store/types'\nimport ResetPassApi from '../services/auth'\n\nexport default {\n  name: 'login',\n  components: {\n    EmptyLayout,\n    TextBox,\n    Button\n  },\n  data () {\n    return {\n      errors: {\n        password: '',\n        confirmPass: '',\n        server: ''\n      },\n      form: {\n        password: '',\n        confirmPass: ''\n      },\n      message: { }\n    }\n  },\n  computed: {\n    ...mapGetters({ isAdminPage: 'isAdminPage', isLoading: 'isLoading' })\n  },\n  watch: {\n    form (val) {}\n  },\n  methods: {\n    ...mapActions({\n      login: LOGIN,\n      checkStore: SET_CURRENT_STORE\n    }),\n    async updatePass () {\n      let canSave = true\n      if (!this.form.password) {\n        this.errors.password = '*この項目は必須です。'\n        canSave = false\n      } else {\n        this.errors.password = ''\n      }\n      if (this.form.password.length < 4) {\n        this.errors.password = '*パスワードは4文字以上である必要があります !'\n        canSave = false\n      } else {\n        this.errors.password = ''\n      }\n      if (this.form.confirmPass !== this.form.password) {\n        this.errors.confirmPass = '*パスワードが一致しません。再入力してください !'\n        canSave = false\n      } else {\n        this.errors.confirmPass = ''\n      }\n      if (canSave === true) {\n        const token = this.$route.query.token\n        const password = this.form.password\n\n        const formData = {\n          token: token,\n          password: password\n        }\n        const resetResult = await ResetPassApi.resetPass(formData)\n        if (resetResult && resetResult.error) {\n          if (resetResult.error === 'invalid_token') {\n            this.errors.server = 'エラーが発生しました。後でもう一度お試しください。!'\n            canSave = false\n          }\n          if (resetResult.error === 'user_not_found') {\n            this.errors.server = '入力されたユーザー名が見つかりません。もう一度お試し下さい!'\n            canSave = false\n          }\n          if (resetResult.error === 'token_and_password_required') {\n            this.errors.server = 'エラーが発生しました。後でもう一度お試しください。!'\n            canSave = false\n          }\n        }\n        if (canSave === true) {\n          this.$router.push('/login')\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .signInComponent {\n    width: 100vw;\n    height: 100vh;\n    text-align: center;\n    padding-top: 10%;\n  }\n  .error {\n    color: red;\n    font-size: 12px;\n    display: block;\n    text-align: left;\n  }\n  .error__server {\n    color: red;\n    font-size: 14px;\n    display: block;\n    text-align: center;\n    margin: -30px 0 20px;\n  }\n\n  .signInBox {\n    box-sizing: border-box;\n    margin: auto;\n    padding: 32px 56px;\n    border-radius: 8px;\n    background-color: #fff;\n    color: #151e5d;\n    position: relative;\n\n    @media only screen and (max-width: 767px) {\n      width: 90% !important;\n      padding: 32px 20px;\n    }\n    width: 500px;\n    height: 326px;\n    box-shadow: 0 2px 6px -4px rgba(130, 136, 148, 0.48),\n    0 0 2px 0 rgba(130, 136, 148, 0.16);\n\n    &.sm {\n      width: 90%;\n      height: 426px;\n      max-height: 95%;\n      padding: 32px 24px;\n    }\n\n    &.md {\n      width: 90%;\n      max-height: 95%;\n      padding: 32px 24px;\n    }\n  }\n\n  .signInLogoBox {\n    width: 80px;\n    margin: 0 auto 16px auto;\n\n    &.sm {\n      width: 60px;\n    }\n\n    &.md {\n      width: 60px;\n    }\n\n    img {\n      max-width: 100%;\n    }\n  }\n\n  .signInTitleBox {\n    font-size: 26px;\n    font-weight: bold;\n    color: #151e5d;\n    margin-bottom: 32px;\n    letter-spacing: 1.6px;\n    text-align: left;\n\n    &.sm {\n      font-size: 20px;\n      margin-bottom: 24px;\n    }\n\n    &.md {\n      font-size: 24px;\n      margin-bottom: 16px;\n    }\n  }\n\n  .signInEmailBox {\n    position: relative;\n    width: 100%;\n    height: 40px;\n    margin-bottom: 16px;\n\n    svg {\n      fill: #9aa8bd;\n      position: absolute;\n      z-index: 1;\n      left: 8px;\n      top: 9px;\n    }\n  }\n\n  .signInPasswordBox {\n    position: relative;\n    width: 100%;\n    height: 40px;\n    margin-bottom: 24px;\n    font-family: HiraginoKaku-W3-90msp-RKSJ-H, serif;\n\n    svg {\n      fill: #9aa8bd;\n      position: absolute;\n      z-index: 1;\n      left: 8px;\n      top: 9px;\n    }\n  }\n\n  .signInButtonBox {\n    width: 100%;\n    height: 48px;\n    margin-bottom: 20px;\n  }\n\n  .signInButtonText {\n    line-height: 48px;\n  }\n\n  .signInResetPassword {\n    font-size: 14px;\n    line-height: 1;\n    text-align: center;\n\n    &.sm {\n      display: none;\n    }\n\n    &.md {\n      display: none;\n    }\n\n    a {\n      color: #24374e;\n      text-decoration: none;\n    }\n  }\n  .page-return {\n    position: absolute;\n    bottom: 10px;\n    left: 35%;\n    a{\n      color: #44a0e5;\n      text-decoration: underline;\n      transition: all 0.5s ease-out;\n      font-size: 13px;\n    }\n  }\n  @media (max-width: 1025px) {\n    .signInBox {\n      width: 60%;\n    }\n  }\n  @media (max-width: 768px) {\n    .signInBox {\n      width: 90%;\n    }\n  }\n  @media (max-width: 450px) {\n    .signInTitleBox {\n      font-size: 18px;\n    }\n  }\n  @media (max-width: 340px) {\n    .signInBox {\n      width: 110%;\n    }\n  }\n</style>\n"],"sourceRoot":"src/views"}]}