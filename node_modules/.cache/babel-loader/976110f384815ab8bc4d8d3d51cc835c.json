{"remainingRequest":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quan/Documents/Projects/django-vue/frontend_test/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/src/views/login.vue","mtime":1615822194522},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport _defineProperty from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapActions, mapGetters } from 'vuex';\nimport EmptyLayout from \"./layouts/empty-layout\";\nimport TextBox from \"../components/partials/textbox\";\nimport Button from \"../components/partials/button\";\nimport { LOGIN, SET_CURRENT_STORE, VERIFY_TOKEN } from \"../store/types\";\nexport default {\n  name: 'login',\n  components: {\n    EmptyLayout: EmptyLayout,\n    TextBox: TextBox,\n    Button: Button\n  },\n  data: function data() {\n    return {\n      form: {\n        phone: '',\n        password: '',\n        store_id: null,\n        admin_id: null,\n        company_id: null\n      },\n      message: '',\n      nameStore: '',\n      keyDataUrl: {\n        name: '',\n        store_id: ''\n      }\n    };\n  },\n  computed: _objectSpread({}, mapGetters({\n    isAdminPage: 'isAdminPage',\n    isLoading: 'isLoading',\n    user: 'user'\n  })),\n  mounted: function mounted() {\n    var key = this.$route.query.key;\n\n    if (key) {\n      var decode = Buffer.from(key, 'base64').toString();\n      var keyDataUrl = JSON.parse(decode);\n      this.nameStore = keyDataUrl.name;\n      this.form.store_id = keyDataUrl.store_id;\n      this.form.company_id = keyDataUrl.company_id;\n      this.form.admin_id = keyDataUrl.admin_id;\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    login: LOGIN,\n    verifyToken: VERIFY_TOKEN,\n    checkStore: SET_CURRENT_STORE\n  })), {}, {\n    onKeyUp: function onKeyUp(e) {\n      if (e.key === 'Enter') {\n        this.doLogin();\n      }\n    },\n    doLogin: function () {\n      var _doLogin = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var canSave, resultData;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                canSave = true;\n\n                if (!this.$route.query.key) {\n                  if (!this.form.phone || !/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(this.form.phone)) {\n                    this.message = 'メールアドレスかパスワードが正しくありません。もう一度入力して下さい。';\n                    canSave = false;\n                  } else {\n                    this.message = '';\n                  }\n                }\n\n                if (canSave) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                this.form.phone = this.form.phone.toLowerCase().trim();\n                _context.next = 7;\n                return this.login(this.form);\n\n              case 7:\n                resultData = _context.sent;\n\n                if (resultData) {\n                  if (this.isAdminPage && !this.form.store_id) {\n                    this.$router.push({\n                      name: 'admin.company'\n                    });\n                  } else {\n                    this.$router.push('/menu');\n                  }\n\n                  this.verifyToken();\n                } else {\n                  this.message = 'メールアドレスかパスワードが正しくありません。もう一度入力して下さい。';\n                }\n\n                if (this.$route.query.key) {\n                  if (!this.isAdminPage && this.form.store_id) {\n                    this.message = 'パスワードが正しくありません。入力し直してください。';\n                  }\n                }\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function doLogin() {\n        return _doLogin.apply(this, arguments);\n      }\n\n      return doLogin;\n    }()\n  })\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"html\">\n  <empty-layout>\n    <div v-if=\"!isLoading\" class=\"signInComponent\">\n      <div class=\"signInBox\">\n        <div class=\"signInLogoBox\">\n          <img :src=\"require('../assets/logo.png')\" />\n        </div>\n        <div class=\"signInTitleBox\">\n          Braitokit Cloud\n        </div>\n        <div class=\"nameStore\">\n          <h3>{{this.nameStore?this.nameStore:''}}</h3>\n        </div>\n        <p class=\"error\" v-if=\"message\">{{message}}</p>\n        <div class=\"signInEmailBox\" v-if=\"!this.$route.query.key\">\n          <TextBox\n            id=\"email\"\n            v-model=\"form.phone\"\n            type=\"text\"\n            :value=\"form.phone\"\n            placeholder=\"Eメール\"\n            pleft=\"14px\"\n            :keyup=\"onKeyUp\"\n            autocomplete=\"off\"\n          />\n        </div>\n        <div class=\"signInPasswordBox\">\n          <TextBox\n            id=\"password\"\n            v-model=\"form.password\"\n            type=\"password\"\n            placeholder=\"パスワード\"\n            pleft=\"14px\"\n            :keyup=\"onKeyUp\"\n            :value=\"form.password\"\n            autocomplete=\"off\"\n          />\n        </div>\n        <div class=\"signInButtonBox\">\n          <Button :click=\"doLogin\">\n            <span class=\"signInButtonText\">ログイン</span>\n          </Button>\n        </div>\n        <div class=\"signInResetPassword\">\n          <router-link to=\"/forgot-password\">\n            パスワードがわからない方はここをクリック\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </empty-layout>\n</template>\n\n<script lang=\"js\">\n\nimport { mapActions, mapGetters } from 'vuex'\nimport EmptyLayout from './layouts/empty-layout'\nimport TextBox from '../components/partials/textbox'\nimport Button from '../components/partials/button'\nimport { LOGIN, SET_CURRENT_STORE, VERIFY_TOKEN } from '../store/types'\n\nexport default {\n  name: 'login',\n  components: {\n    EmptyLayout,\n    TextBox,\n    Button\n  },\n  data () {\n    return {\n      form: {\n        phone: '',\n        password: '',\n        store_id: null,\n        admin_id: null,\n        company_id: null\n      },\n      message: '',\n      nameStore: '',\n      keyDataUrl: {\n        name: '',\n        store_id: ''\n      }\n    }\n  },\n  computed: {\n    ...mapGetters({ isAdminPage: 'isAdminPage', isLoading: 'isLoading', user: 'user' })\n  },\n  mounted () {\n    let key = this.$route.query.key\n    if (key) {\n      let decode = Buffer.from(key, 'base64').toString()\n      let keyDataUrl = JSON.parse(decode)\n      this.nameStore = keyDataUrl.name\n      this.form.store_id = keyDataUrl.store_id\n      this.form.company_id = keyDataUrl.company_id\n      this.form.admin_id = keyDataUrl.admin_id\n    }\n  },\n  methods: {\n    ...mapActions({\n      login: LOGIN,\n      verifyToken: VERIFY_TOKEN,\n      checkStore: SET_CURRENT_STORE\n    }),\n    onKeyUp (e) {\n      if (e.key === 'Enter') {\n        this.doLogin()\n      }\n    },\n    async doLogin () {\n      let canSave = true\n      if (!this.$route.query.key) {\n        if (!this.form.phone || !(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(this.form.phone))) {\n          this.message = 'メールアドレスかパスワードが正しくありません。もう一度入力して下さい。'\n          canSave = false\n        } else {\n          this.message = ''\n        }\n      }\n      if (!canSave) {\n        return\n      }\n      this.form.phone = this.form.phone.toLowerCase().trim()\n      let resultData = await this.login(this.form)\n      if (resultData) {\n        if (this.isAdminPage && !this.form.store_id) {\n          this.$router.push({ name: 'admin.company' })\n        } else {\n          this.$router.push('/menu')\n        }\n        this.verifyToken()\n      } else {\n        this.message = 'メールアドレスかパスワードが正しくありません。もう一度入力して下さい。'\n      }\n      if (this.$route.query.key) {\n        if (!this.isAdminPage && this.form.store_id) {\n          this.message = 'パスワードが正しくありません。入力し直してください。'\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .signInComponent {\n    width: 100vw;\n    height: 100vh;\n    text-align: center;\n  }\n\n  .error {\n    color: red;\n    margin-bottom: 15px;\n    font-size: 14px;\n  }\n\n  .signInBox {\n    box-sizing: border-box;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 472px;\n    padding: 32px 56px;\n    border-radius: 8px;\n    box-shadow: 0 2px 6px -4px rgba(130, 136, 148, 0.48),\n    0 0 2px 0 rgba(130, 136, 148, 0.16);\n    background-color: #fff;\n\n    @media only screen and (max-width: 767px) {\n      width: 90% !important;\n    }\n\n    @media only screen and (max-width: 374px) {\n      padding: 32px\n    }\n\n    &.sm {\n      width: 90%;\n      height: 426px;\n      max-height: 95%;\n      padding: 32px 24px;\n    }\n\n    &.md {\n      width: 90%;\n      max-height: 95%;\n      padding: 32px 24px;\n    }\n  }\n\n  .signInLogoBox {\n    width: 80px;\n    margin: 0 auto 16px auto;\n\n    &.sm {\n      width: 60px;\n    }\n\n    &.md {\n      width: 60px;\n    }\n\n    img {\n      max-width: 100%;\n    }\n  }\n\n  .signInTitleBox {\n    font-size: 26px;\n    font-weight: 500;\n    color: #24374e;\n    margin-bottom: 32px;\n    letter-spacing: 1.6px;\n\n    &.sm {\n      font-size: 20px;\n      margin-bottom: 24px;\n    }\n\n    &.md {\n      font-size: 24px;\n      margin-bottom: 16px;\n    }\n  }\n\n  .signInEmailBox {\n    position: relative;\n    width: 100%;\n    height: 40px;\n    margin-bottom: 16px;\n\n    svg {\n      fill: #9aa8bd;\n      position: absolute;\n      z-index: 1;\n      left: 8px;\n      top: 9px;\n    }\n  }\n\n  .signInPasswordBox {\n    position: relative;\n    width: 100%;\n    height: 40px;\n    margin-bottom: 24px;\n    font-family: HiraginoKaku-W3-90msp-RKSJ-H, serif;\n\n    svg {\n      fill: #9aa8bd;\n      position: absolute;\n      z-index: 1;\n      left: 8px;\n      top: 9px;\n    }\n  }\n\n  .signInButtonBox {\n    width: 100%;\n    height: 48px;\n    margin-bottom: 20px;\n  }\n\n  .signInButtonText {\n    line-height: 48px;\n  }\n\n  .signInResetPassword {\n    font-size: 14px;\n    line-height: 1;\n    text-align: center;\n\n    &.sm {\n      display: none;\n    }\n\n    &.md {\n      display: none;\n    }\n\n    a {\n      color: #24374e;\n      text-decoration: none;\n    }\n  }\n  .nameStore {\n    margin-bottom: 25px;\n    font-size: 22px;\n    margin-top: -20px;\n  }\n</style>\n"],"sourceRoot":"src/views"}]}