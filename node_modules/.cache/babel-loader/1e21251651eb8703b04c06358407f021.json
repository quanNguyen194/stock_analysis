{"remainingRequest":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quan/Documents/Projects/django-vue/frontend_test/src/views/admin/add-company.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/src/views/admin/add-company.vue","mtime":1615822194522},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TextBox from \"../../components/partials/textbox\";\nimport Button from \"../../components/partials/button\";\nimport AdminLayout from \"../layouts/admin-layout\";\nimport { mapGetters } from 'vuex';\nimport CompanyApi from \"../../services/company\";\nimport SettingApi from \"../../services/setting\";\nexport default {\n  name: 'setting-profile',\n  components: {\n    TextBox: TextBox,\n    Button: Button,\n    AdminLayout: AdminLayout\n  },\n  computed: _objectSpread({}, mapGetters({\n    profile: 'user'\n  })),\n  data: function data() {\n    return {\n      modalTitle: {\n        name: ''\n      },\n      prefectures: ['北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島', '沖縄県'],\n      errors: {\n        identify: '',\n        name: '',\n        post_code: '',\n        prefecture: '',\n        address: '',\n        representative_name: '',\n        phone: '',\n        email: '',\n        url: ''\n      },\n      isShow: false,\n      formType: 'add',\n      isShowFormDelete: false,\n      form: {\n        identify: '',\n        name: '',\n        post_code: '',\n        prefecture: '',\n        address: '',\n        representative_name: '',\n        phone: '',\n        email: '',\n        url: ''\n      },\n      users: [],\n      companies: [],\n      visible: false\n    };\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var list;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return CompanyApi.getCompany();\n\n            case 2:\n              this.companies = _context.sent;\n              _context.next = 5;\n              return SettingApi.listUsers();\n\n            case 5:\n              list = _context.sent;\n              this.users = list.data.users; // console.log(this.users)\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  methods: {\n    addToCompany: function () {\n      var _addToCompany = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this = this;\n\n        var isUserEmailExisted, isCompanyEmailExisted, canSave, formData, res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // console.log(this.form.email)\n                isUserEmailExisted = this.users.filter(function (user) {\n                  return user.email === _this.form.email;\n                });\n                isCompanyEmailExisted = this.companies.filter(function (company) {\n                  return company.email === _this.form.email;\n                }); // console.log('user existed',isUserEmailExisted)\n                //\n                // console.log('company existed',isCompanyEmailExisted)\n\n                canSave = true;\n\n                if (!this.form.name) {\n                  this.errors.name = '*この項目は必須です。';\n                  canSave = false;\n                } else {\n                  this.errors.name = '';\n                }\n\n                if (!this.form.post_code) {\n                  this.errors.post_code = '*この項目は必須です。';\n                  canSave = false;\n                } else {\n                  this.errors.post_code = '';\n                }\n\n                if (!this.form.address) {\n                  this.errors.address = '*この項目は必須です。';\n                  canSave = false;\n                } else {\n                  this.errors.address = '';\n                }\n\n                if (!this.form.representative_name) {\n                  this.errors.representative_name = '*この項目は必須です。';\n                  canSave = false;\n                } else {\n                  this.errors.representative_name = '';\n                }\n\n                if (!this.form.phone) {\n                  this.errors.phone = '*この項目は必須です。';\n                  canSave = false;\n                } else {\n                  this.errors.phone = '';\n                }\n\n                if (this.form.email) {\n                  if (!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(this.form.email)) {\n                    this.errors.email = '無効な形式！ このフィールドは電子メールである必要があります。';\n                    canSave = false;\n                  } else if (this.form.email !== '') {\n                    if (isUserEmailExisted.length || isCompanyEmailExisted.length) {\n                      this.errors.email = 'すでに使用済みのメールアドレスです。';\n                      canSave = false;\n                    }\n                  } else {\n                    this.errors.email = '';\n                  }\n                }\n\n                if (this.form.url) {\n                  // eslint-disable-next-line no-useless-escape\n                  if (!/^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/.test(this.form.url)) {\n                    this.errors.url = '*無効な形式!';\n                    canSave = false;\n                  } else {\n                    this.errors.url = '';\n                  }\n                }\n\n                if (!(canSave === true)) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                formData = {\n                  name: this.form.name,\n                  post_code: this.form.post_code,\n                  address: this.form.address,\n                  representative_name: this.form.representative_name,\n                  phone: this.form.phone,\n                  email: this.form.email || '',\n                  url: this.form.url || ''\n                };\n                _context2.next = 14;\n                return CompanyApi.addCompany(formData);\n\n              case 14:\n                res = _context2.sent;\n                _context2.next = 17;\n                return this.$router.push('/admin/company/' + res._id);\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function addToCompany() {\n        return _addToCompany.apply(this, arguments);\n      }\n\n      return addToCompany;\n    }()\n  }\n};",{"version":3,"sources":["add-company.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA,OAAA,OAAA;AACA,OAAA,MAAA;AACA,OAAA,WAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,UAAA;AACA,OAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,MAAA,EAAA,MAFA;AAGA,IAAA,WAAA,EAAA;AAHA,GAFA;AAOA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,OAAA,EAAA;AADA,GAAA,CADA,CAPA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,UAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA,OADA;AAIA,MAAA,WAAA,EAAA,CACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,CAJA;AAOA,MAAA,MAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,SAAA,EAAA,EAHA;AAIA,QAAA,UAAA,EAAA,EAJA;AAKA,QAAA,OAAA,EAAA,EALA;AAMA,QAAA,mBAAA,EAAA,EANA;AAOA,QAAA,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","sourcesContent":["<template>\n  <admin-layout>\n    <div class=\"back-to-list\">\n      <router-link :to=\"`/admin/company`\"><span></span> 会社一覧へ戻る</router-link>\n    </div>\n    <div class=\"menu__header\">\n      会社登録\n    </div>\n    <div class=\"setting-profile col-md-12\">\n      <!-- name -->\n      <div class=\"setting-profile-edit\">\n        <div class=\"setting-profile__title col-md-3\">\n          会社名\n        </div>\n        <div class=\"setting-profile__input col-md-6\">\n          <TextBox\n            id=\"nameCompany\"\n            type=\"text\"\n            v-model=\"form.name\"\n            placeholder=\"例：日本橋支店\"\n          />\n          <span class=\"error-message\" v-if=\"errors.name.length\">{{errors.name}}</span>\n        </div>\n        <div class=\"clear\"></div>\n      </div>\n      <!-- code -->\n      <div class=\"setting-profile-edit\">\n        <div class=\"setting-profile__title col-md-3\">\n          郵便番号\n        </div>\n        <div class=\"setting-profile__input col-md-4\">\n          <TextBox\n            id=\"post_code\"\n            type=\"text\"\n            v-model=\"form.post_code\"\n            placeholder=\"例：1030014\"\n          />\n          <span class=\"error-message\" v-if=\"errors.post_code.length\">{{errors.post_code}}</span>\n        </div>\n        <div class=\"clear\"></div>\n      </div>\n      <!-- address -->\n      <div class=\"setting-profile-edit\">\n        <div class=\"setting-profile__title col-md-3\">\n          住所\n        </div>\n        <div class=\"setting-profile__input col-md-6\">\n          <TextBox\n            id=\"address\"\n            type=\"text\"\n            v-model=\"form.address\"\n            placeholder=\"例：東京都中央区日本橋蛎殻町\"\n          />\n          <span class=\"error-message\" v-if=\"errors.address.length\">{{errors.address}}</span>\n        </div>\n        <div class=\"clear\"></div>\n      </div>\n      <!-- representative_name -->\n      <div class=\"setting-profile-edit\">\n        <div class=\"setting-profile__title col-md-3\">\n          代表者名\n        </div>\n        <div class=\"setting-profile__input col-md-4\">\n          <TextBox\n            id=\"representative_name\"\n            type=\"text\"\n            placeholder=\"例：山田花子\"\n            v-model=\"form.representative_name\"\n          />\n          <span class=\"error-message\" v-if=\"errors.representative_name.length\">{{errors.representative_name}}</span>\n        </div>\n        <div class=\"clear\"></div>\n      </div>\n      <!-- phone -->\n      <div class=\"setting-profile-edit\">\n        <div class=\"setting-profile__title col-md-3\">\n          電話番号\n        </div>\n        <div class=\"setting-profile__input col-md-4\">\n          <TextBox\n            id=\"phone\"\n            type=\"tel\"\n            placeholder=\"例：0123456789\"\n            v-model=\"form.phone\"\n          />\n          <span class=\"error-message\" v-if=\"errors.phone.length\">{{errors.phone}}</span>\n        </div>\n        <div class=\"clear\"></div>\n      </div>\n      <!-- email -->\n      <div class=\"setting-profile-edit\">\n        <div class=\"setting-profile__title col-md-3\">\n          メールアドレス\n        </div>\n        <div class=\"setting-profile__input col-md-6\">\n          <TextBox\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"example@mail.com\"\n            v-model=\"form.email\"\n          />\n          <span class=\"error-message\" v-if=\"errors.email.length\">{{errors.email}}</span>\n        </div>\n        <div class=\"clear\"></div>\n      </div>\n      <!-- url -->\n      <div class=\"setting-profile-edit\">\n        <div class=\"setting-profile__title col-md-3\">\n          URL\n        </div>\n        <div class=\"setting-profile__input col-md-6\">\n          <TextBox\n            id=\"url\"\n            type=\"url\"\n            placeholder=\"https://\"\n            v-model=\"form.url\"\n          />\n          <span class=\"error-message\" v-if=\"errors.url.length\">{{errors.url}}</span>\n        </div>\n        <div class=\"clear\"></div>\n      </div>\n\n      <div class=\"button-edit\">\n        <Button :click=\"addToCompany\" width=\"206px\" height=\"46px\" padding=\"5px\">保存する</Button>\n      </div>\n    </div>\n  </admin-layout>\n</template>\n\n<script>\nimport TextBox from '../../components/partials/textbox'\nimport Button from '../../components/partials/button'\nimport AdminLayout from '../layouts/admin-layout'\nimport { mapGetters } from 'vuex'\nimport CompanyApi from '../../services/company'\nimport SettingApi from '../../services/setting'\n\nexport default {\n  name: 'setting-profile',\n  components: {\n    TextBox,\n    Button,\n    AdminLayout\n  },\n  computed: {\n    ...mapGetters({\n      profile: 'user'\n    })\n  },\n  data () {\n    return {\n      modalTitle: {\n        name: ''\n      },\n      prefectures: [\n        '北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島', '沖縄県'\n      ],\n      errors: {\n        identify: '',\n        name: '',\n        post_code: '',\n        prefecture: '',\n        address: '',\n        representative_name: '',\n        phone: '',\n        email: '',\n        url: ''\n      },\n      isShow: false,\n      formType: 'add',\n      isShowFormDelete: false,\n      form: {\n        identify: '',\n        name: '',\n        post_code: '',\n        prefecture: '',\n        address: '',\n        representative_name: '',\n        phone: '',\n        email: '',\n        url: ''\n      },\n      users: [],\n      companies: [],\n      visible: false\n    }\n  },\n  async mounted () {\n    this.companies = await CompanyApi.getCompany()\n    const list = await SettingApi.listUsers()\n    this.users = list.data.users\n    // console.log(this.users)\n  },\n  methods: {\n    async addToCompany () {\n      // console.log(this.form.email)\n      const isUserEmailExisted = this.users.filter(user => {\n        return user.email === this.form.email\n      })\n\n      const isCompanyEmailExisted = this.companies.filter(company => {\n        return company.email === this.form.email\n      })\n\n      // console.log('user existed',isUserEmailExisted)\n      //\n      // console.log('company existed',isCompanyEmailExisted)\n\n      let canSave = true\n      if (!this.form.name) {\n        this.errors.name = '*この項目は必須です。'\n        canSave = false\n      } else {\n        this.errors.name = ''\n      }\n\n      if (!this.form.post_code) {\n        this.errors.post_code = '*この項目は必須です。'\n        canSave = false\n      } else {\n        this.errors.post_code = ''\n      }\n\n      if (!this.form.address) {\n        this.errors.address = '*この項目は必須です。'\n        canSave = false\n      } else {\n        this.errors.address = ''\n      }\n\n      if (!this.form.representative_name) {\n        this.errors.representative_name = '*この項目は必須です。'\n        canSave = false\n      } else {\n        this.errors.representative_name = ''\n      }\n\n      if (!this.form.phone) {\n        this.errors.phone = '*この項目は必須です。'\n        canSave = false\n      } else {\n        this.errors.phone = ''\n      }\n      if (this.form.email) {\n        if (!(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(this.form.email))) {\n          this.errors.email = '無効な形式！ このフィールドは電子メールである必要があります。'\n          canSave = false\n        } else if (this.form.email !== '') {\n          if (isUserEmailExisted.length || isCompanyEmailExisted.length) {\n            this.errors.email = 'すでに使用済みのメールアドレスです。'\n            canSave = false\n          }\n        } else {\n          this.errors.email = ''\n        }\n      }\n      if (this.form.url) {\n        // eslint-disable-next-line no-useless-escape\n        if (!(/^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/.test(this.form.url))) {\n          this.errors.url = '*無効な形式!'\n          canSave = false\n        } else {\n          this.errors.url = ''\n        }\n      }\n      if (canSave === true) {\n        const formData = {\n          name: this.form.name,\n          post_code: this.form.post_code,\n          address: this.form.address,\n          representative_name: this.form.representative_name,\n          phone: this.form.phone,\n          email: this.form.email || '',\n          url: this.form.url || ''\n        }\n        const res = await CompanyApi.addCompany(formData)\n        await this.$router.push('/admin/company/' + res._id)\n      }\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n  .error-message {\n    color: red;\n    font-size: 14px;\n  }\n  .back-to-list {\n    color: #0089f0;\n    font-size: 14px;\n    margin-bottom: 15px;\n    padding-top: 20px;\n    a.active {\n      color: #0089f0;\n    }\n    span {\n      position: relative;\n      display: inline-block;\n      padding: 0 0 0 16px;\n      color: #0089f0;\n      vertical-align: middle;\n      -webkit-text-decoration: none;\n      text-decoration: none;\n      font-size: 15px;\n    }\n    span:before {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      margin: auto;\n      content: '';\n      vertical-align: middle;\n      left: 3px;\n      width: 7px;\n      height: 7px;\n      border-top: 1px solid #0089f0;\n      border-right: 1px solid #0089f0;\n      -webkit-transform: rotate(225deg);\n      -ms-transform: rotate(225deg);\n      transform: rotate(225deg);\n    }\n    span:after {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      margin: auto;\n      content: '';\n      vertical-align: middle;\n      left: 3px;\n      width: 12px;\n      height: 1px;\n      background: #0089f0;\n    }\n  }\n  .menu__header {\n    border-left: 5px solid #24387c;\n    font-size: 24px;\n    padding-left: 20px;\n    font-weight: bold;\n    color: #24374e;\n    line-height: 2;\n    margin-bottom: 30px;\n  }\n  .button-edit {\n    margin-top: 25px\n  }\n  .setting-profile {\n    margin-bottom: 30px;\n\n    a {\n      color: #151e5d;\n    }\n\n    &-edit {\n      background-color: #fff;\n      padding: 20px;\n      border-bottom: 1px solid #efefef;\n\n      &:last-child {\n        border-bottom: none;\n        text-align: left;\n        .button__container {\n          margin: unset;\n        }\n      }\n\n      select {\n        width: 99.9%;\n        padding: 5px 10px;\n      }\n\n      .name__store {\n        color: black;\n        font-size: 24px;\n        font-weight: bold;\n      }\n      p {\n        color: black;\n      }\n    }\n    &__input {\n      .col-md-3 {\n        color: #151e5d;\n      }\n      .col-md-12 {\n        border-bottom: 1px solid #efefef;\n        padding: 20px 0;\n      }\n    }\n\n    &__title {\n      color: #151e5d;\n      font-size: 16px;\n      font-weight: 600;\n      display: inline-block;\n      vertical-align: top;\n    }\n  }\n  .address {\n    padding: 0 20px;\n    .button-edit {\n      margin: unset;\n      float: right;\n      .button__container {\n        width: 100px !important;\n        margin-left: 30px;\n      }\n    }\n    .setting-profile__title {\n      margin-top: 20px;\n    }\n    .setting-profile-edit {\n      padding-left: 0;\n    }\n  }\n  .modal__footer {\n    .col-md-6 {\n      padding: 0 100px;\n    }\n  }\n  .modal-edit {\n\n    .col-md-3 {\n      color: #151e5d;\n      label {\n        color: #151e5d;\n        font-weight: bold;\n      }\n    }\n    .col-md-12 {\n      border-bottom: 1px solid #efefef;\n      padding: 20px 0;\n      &:last-child {\n        border-bottom: none;\n      }\n    }\n    .col-md-5 {\n      select {\n        width: 100%;\n        padding: 5px 10px;\n        font-size: 16px;\n        border: 1px solid #323131;\n      }\n    }\n  }\n  .store__table {\n    table {\n      width: 100%;\n      tr {\n        border-bottom: 1px solid #efefef;\n        width: 100% !important;\n        display: inline-block;\n      }\n      td.col-md-8 {\n        padding: 10px 0;\n      }\n      td.col-md-2 {\n        padding: 20px 0;\n      }\n    }\n  }\n  .delete_btn {\n    padding: 0 15px !important;\n  }\n  @media (max-width: 992px) {\n    .setting-profile__title {\n      margin-bottom: 10px;\n    }\n  }\n  @media (max-width: 768px) {\n    .content__container {\n      width: 100% !important;\n    }\n  }\n  @media (max-width: 450px) {\n    .back-to-list {\n      margin-top: 50px;\n    }\n  }\n\n</style>\n"],"sourceRoot":"src/views/admin"}]}