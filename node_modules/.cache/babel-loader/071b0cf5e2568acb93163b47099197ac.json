{"remainingRequest":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quan/Documents/Projects/django-vue/frontend_test/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/src/App.vue","mtime":1615824491695},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/quan/Documents/Projects/django-vue/frontend_test/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapActions, mapGetters } from 'vuex';\nimport { VERIFY_TOKEN } from \"./store/types\";\nexport default {\n  name: 'app',\n  computed: _objectSpread({}, mapGetters({\n    user: 'user'\n  })),\n  methods: _objectSpread({}, mapActions({\n    verifyToken: VERIFY_TOKEN\n  })),\n  mounted: function () {\n    var _mounted = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var path, userRole;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              path = this.$router.currentRoute.path;\n\n              if (['/login', '/reset-password', '/forgot-password'].includes(path)) {\n                _context.next = 7;\n                break;\n              }\n\n              // const verifyRes = await this.verifyToken()\n              // if (!verifyRes) {\n              //   return this.$router.replace({ name: 'login' })\n              // }\n              // const userRole = verifyRes.user.role\n              userRole = 'user';\n\n              if (!(userRole === 'admin' && !path.includes('admin'))) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", this.$router.replace('/admin/company'));\n\n            case 5:\n              if (!(path === '/admin/company' && userRole !== 'admin')) {\n                _context.next = 7;\n                break;\n              }\n\n              return _context.abrupt(\"return\", this.$router.replace('/menu'));\n\n            case 7:\n              window.onbeforeunload = function (e) {\n                window.localStorage.removeItem('preview_token');\n              };\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAOA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,SAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,IAAA,EAAA;AADA,GAAA,CADA,CAFA;AAOA,EAAA,OAAA,oBACA,UAAA,CAAA;AACA,IAAA,WAAA,EAAA;AADA,GAAA,CADA,CAPA;AAYA,EAAA,OAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA,cAAA,IAbA,GAaA,KAAA,OAAA,CAAA,YAAA,CAAA,IAbA;;AAAA,kBAcA,CAAA,QAAA,EAAA,iBAAA,EAAA,kBAAA,EAAA,QAAA,CAAA,IAAA,CAdA;AAAA;AAAA;AAAA;;AAeA;AACA;AACA;AACA;AAEA;AACA,cAAA,QArBA,GAqBA,MArBA;;AAAA,oBAsBA,QAAA,KAAA,OAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAtBA;AAAA;AAAA;AAAA;;AAAA,+CAuBA,KAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAvBA;;AAAA;AAAA,oBA0BA,IAAA,KAAA,gBAAA,IAAA,QAAA,KAAA,OA1BA;AAAA;AAAA;AAAA;;AAAA,+CA2BA,KAAA,OAAA,CAAA,OAAA,CAAA,OAAA,CA3BA;;AAAA;AA8BA,cAAA,MAAA,CAAA,cAAA,GAAA,UAAA,CAAA,EAAA;AACA,gBAAA,MAAA,CAAA,YAAA,CAAA,UAAA,CAAA,eAAA;AACA,eAFA;;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAA","sourcesContent":["<template lang=\"html\">\n  <div id=\"app\">\n      <router-view />\n  </div>\n</template>\n\n<script lang=\"js\">\nimport { mapActions, mapGetters } from 'vuex'\nimport { VERIFY_TOKEN } from './store/types'\n\nexport default {\n  name: 'app',\n  computed: {\n    ...mapGetters({\n      user: 'user'\n    })\n  },\n  methods: {\n    ...mapActions({\n      verifyToken: VERIFY_TOKEN\n    })\n  },\n  async mounted () {\n    const path = this.$router.currentRoute.path\n    if (!['/login', '/reset-password', '/forgot-password'].includes(path)) {\n      // const verifyRes = await this.verifyToken()\n      // if (!verifyRes) {\n      //   return this.$router.replace({ name: 'login' })\n      // }\n\n      // const userRole = verifyRes.user.role\n      const userRole = 'user'\n      if (userRole === 'admin' && !path.includes('admin')) {\n        return this.$router.replace('/admin/company')\n      }\n\n      if (path === '/admin/company' && (userRole !== 'admin')) {\n        return this.$router.replace('/menu')\n      }\n    }\n    window.onbeforeunload = function (e) {\n      window.localStorage.removeItem('preview_token')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  @import \"assets/scss/common\";\n</style>\n"],"sourceRoot":"src"}]}