{"remainingRequest":"/home/quan/Documents/Projects/stock_analysis/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quan/Documents/Projects/stock_analysis/src/views/user/setting/tabs/setting-employee.vue?vue&type=style&index=0&id=61999953&lang=scss&scoped=true&","dependencies":[{"path":"/home/quan/Documents/Projects/stock_analysis/src/views/user/setting/tabs/setting-employee.vue","mtime":1615822194522},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/quan/Documents/Projects/stock_analysis/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.mt-25 {\n  margin-top: 25px\n}\n\n.m-a {\n  margin: auto;\n}\n\n.setting-employee {\n  .btn-registration {\n\n    width: 160px;\n    padding: 5px 10px;\n  }\n\n  .table-info {\n    overflow-x: auto;\n    margin-top: 10px;\n\n    table {\n      width: 100%;\n      min-width: 700px;\n      text-align: center;\n      border: none;\n      border-collapse: collapse;\n    }\n\n    th {\n      background-color: #e8e6e6;\n      border: none;\n      border-collapse: collapse;\n      padding: 5px;\n    }\n\n    td {\n      padding: 10px;\n    }\n\n    tr {\n      background-color: #fff;\n      border: none;\n      border-collapse: collapse;\n    }\n  }\n\n  .deleted {\n    width: 35%;\n    margin-left: 15px;\n  }\n\n  .not_delete {\n    width: 35%;\n    margin-right: 15px;\n  }\n\n}\n\n.action {\n  display: inline-block;\n  margin: 0 10px;\n  vertical-align: top;\n\n  &-icon {\n    display: block;\n    margin: auto;\n    transform: translate(3%, -10%);\n  }\n}\n\n//------------------------------------------------------RESPONSIVE------------------------------------------------------\n\n@media (max-width: 768px) {\n  .font-weight-bold-mb {\n    font-weight: bold\n  }\n  .setting-employee {\n    padding-bottom: 70px\n  }\n\n  table {\n    min-width: 100% !important;\n\n    .title {\n      display: none;\n    }\n\n    tr {\n      border-bottom: 2px solid #efefef !important;\n    }\n\n    .table__empty {\n      display: none;\n    }\n\n    .table__name {\n      display: block;\n      text-align: left;\n    }\n\n    .table__phone {\n      @extend .table__name\n    }\n\n    .table__email {\n      @extend .table__name\n    }\n\n    .table__btn {\n      .button__container {\n        height: 40px !important;\n        padding: 5px !important;\n      }\n    }\n  }\n  .action-icon {\n    transform: translate(0%, -10%);\n    font-size: 20px !important;\n  }\n}\n\n@media (max-width: 539px) {\n  .table__btn {\n    display: block;\n    text-align: left;\n  }\n}\n",{"version":3,"sources":["setting-employee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"setting-employee.vue","sourceRoot":"src/views/user/setting/tabs","sourcesContent":["<template>\n  <div class=\"setting-employee\" v-if=\"!isLoading\">\n    <div class=\"btn-registration button-edit\">\n      <router-link :to=\"{name: 'user.regist'}\">\n        <Button padding=\"5px 10px\" v-if=\"store.max_users > users.length\">\n          従業員登録\n        </Button>\n      </router-link>\n    </div>\n    <div class=\"fright\">\n      <span>ユーザー数: {{users.length}}/{{store.max_users}}</span>\n    </div>\n    <div class=\"clear\"></div>\n    <div class=\"table-info\">\n      <table>\n        <tr class=\"title\">\n          <th>#</th>\n          <th>氏名</th>\n          <th>電話番号</th>\n          <th>メールアドレス</th>\n          <th>アクション</th>\n        </tr>\n        <tr v-for=\"(user, index) in users\" :key=\"user.email\" style=\"width: 100%\">\n          <td class=\"table__empty\">{{index + 1}}</td>\n          <td class=\"table__name font-weight-bold-mb\">{{ user.name }}</td>\n          <td class=\"table__phone\">{{ user.phone }}</td>\n          <td class=\"table__email\">{{ user.email }}</td>\n          <td class=\"table__btn\">\n            <div v-if=\"user.email!==profile.email && validRole\">\n              <div class=\"action\">\n                <router-link :to=\"'/user/update/'+user._id\">\n                  <Button background-color=\"#151e5d\" width=\"30px\" height=\"30px\">\n                    <div class=\"action-icon\">\n                      <i class=\"fas fa-pen-square\"></i>\n                    </div>\n                  </Button>\n                </router-link>\n              </div>\n\n              <div class=\"action\" v-if=\"user.name !== store.representative_name && user.role !== 'manager' \">\n                <Button backgroundColor=\"#ff0000\" width=\"30px\" height=\"30px\" fontSize=\"22px\" class=\"m-a\"\n                        :click=\"() => toggleVisible(user._id, index)\">\n                  <div class=\"action-icon\">×</div>\n                </Button>\n              </div>\n            </div>\n          </td>\n        </tr>\n      </table>\n    </div>\n    <div class=\"modal-confirm\">\n      <Modal title=\"このユーザーを削除します\" v-if=\"modal_visible\" @updateModalVisible=\"modal_visible = false\" width=\"50%\">\n        <p style=\"font-weight: bold\">\n          削除すると、もとに戻すことはできません。 <br>\n          それでもよろしい場合は削除を選択してください。\n        </p>\n        <template slot=\"footer\">\n          <div @click=\"() => toggleVisible()\" class=\"not_delete\">\n            <Button background-color=\"#fff\" color=\"#24374e\" border-color=\"#24374e\">キャンセル</Button>\n          </div>\n          <div class=\"deleted\">\n            <Button :click=\"() => deleteUser()\" border-color=\"#24374e\">削除</Button>\n          </div>\n        </template>\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Button from '@/components/partials/button'\nimport Modal from '@/components/partials/modal'\nimport SettingApi from '@/services/setting'\nimport { mapActions, mapGetters } from 'vuex'\nimport { SET_LOADING } from '@/store/types'\n\nexport default {\n  name: 'setting-employee',\n  components: {\n    Button,\n    Modal\n  },\n  computed: {\n    ...mapGetters({\n      profile: 'user',\n      store: 'store',\n      isLoading: 'isLoading'\n    })\n  },\n\n  data () {\n    return {\n      users: [],\n      modal_visible: false,\n      validRole: false,\n      deleteId: '',\n      deleteIndex: '',\n      isShowDelete: true,\n      dataStore: null\n    }\n  },\n  async created () {\n    const list = await SettingApi.listUsers()\n    this.users = list.data.users\n    this.setLoading(false)\n  },\n  mounted () {\n    this.dataStore = this.store\n    this.setLoading(true)\n    if (this.profile.role === 'admin') {\n      this.isShowDelete = false\n    }\n    if (this.profile.role !== 'user') {\n      this.validRole = true\n    }\n  },\n  methods: {\n    ...mapActions({\n      setLoading: SET_LOADING\n    }),\n    async deleteUser () {\n      await SettingApi.deleteUser(this.deleteId)\n      this.users.splice(this.deleteIndex, 1)\n      this.modal_visible = false\n    },\n    toggleVisible (id, index) {\n      this.modal_visible = !this.modal_visible\n      this.deleteId = id\n      this.deleteIndex = index\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n  .mt-25 {\n    margin-top: 25px\n  }\n\n  .m-a {\n    margin: auto;\n  }\n\n  .setting-employee {\n    .btn-registration {\n\n      width: 160px;\n      padding: 5px 10px;\n    }\n\n    .table-info {\n      overflow-x: auto;\n      margin-top: 10px;\n\n      table {\n        width: 100%;\n        min-width: 700px;\n        text-align: center;\n        border: none;\n        border-collapse: collapse;\n      }\n\n      th {\n        background-color: #e8e6e6;\n        border: none;\n        border-collapse: collapse;\n        padding: 5px;\n      }\n\n      td {\n        padding: 10px;\n      }\n\n      tr {\n        background-color: #fff;\n        border: none;\n        border-collapse: collapse;\n      }\n    }\n\n    .deleted {\n      width: 35%;\n      margin-left: 15px;\n    }\n\n    .not_delete {\n      width: 35%;\n      margin-right: 15px;\n    }\n\n  }\n\n  .action {\n    display: inline-block;\n    margin: 0 10px;\n    vertical-align: top;\n\n    &-icon {\n      display: block;\n      margin: auto;\n      transform: translate(3%, -10%);\n    }\n  }\n\n  //------------------------------------------------------RESPONSIVE------------------------------------------------------\n\n  @media (max-width: 768px) {\n    .font-weight-bold-mb {\n      font-weight: bold\n    }\n    .setting-employee {\n      padding-bottom: 70px\n    }\n\n    table {\n      min-width: 100% !important;\n\n      .title {\n        display: none;\n      }\n\n      tr {\n        border-bottom: 2px solid #efefef !important;\n      }\n\n      .table__empty {\n        display: none;\n      }\n\n      .table__name {\n        display: block;\n        text-align: left;\n      }\n\n      .table__phone {\n        @extend .table__name\n      }\n\n      .table__email {\n        @extend .table__name\n      }\n\n      .table__btn {\n        .button__container {\n          height: 40px !important;\n          padding: 5px !important;\n        }\n      }\n    }\n    .action-icon {\n      transform: translate(0%, -10%);\n      font-size: 20px !important;\n    }\n  }\n\n  @media (max-width: 539px) {\n    .table__btn {\n      display: block;\n      text-align: left;\n    }\n  }\n</style>\n"]}]}